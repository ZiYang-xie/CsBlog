!function(r,o){var n,e,t=void 0!==r&&"IntersectionObserver"in r,c=Array.prototype.slice.call(o.querySelectorAll("img[srcset]"));c&&0!==c.length&&(t?(n=new IntersectionObserver(function(e){e.forEach(({target:e,isIntersecting:t})=>{t&&(e.setAttribute("srcset",e.src),e.onload=e.onerror=()=>n.unobserve(e))})},{threshold:[0],rootMargin:(r.innerHeight||o.documentElement.clientHeight)+"px"}),c.map(e=>n.observe(e))):(e=new Debouncer(function(){for(var i=0;i<c.length;i++)!function(e){var e=e.getBoundingClientRect(),t=r.innerHeight||o.documentElement.clientHeight,n=e.top;return 0<=n&&n<=3*t||n<=0&&n<=-2*t-e.height}(c[i])||!function(){var e,t,n,r,o=c[i];e=o,t=function(){c=c.filter(function(e){return o!==e})},n=new Image,r=e.getAttribute("src"),n.onload=function(){e.srcset=r,t&&t()},n.srcset=r}();0===c.length&&r.removeEventListener("scroll",e,!1)}),r.addEventListener("scroll",e,!1),e.handleEvent()))}(window,document);