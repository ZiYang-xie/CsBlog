<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="&#34;auto&#34;"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png"><link rel="icon" type="image/png" href="/img/favicon.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="description" content=""><meta name="author" content="Ziyang Xie"><meta name="keywords" content=""><title>ICS_PJ Y86 Extended CPU - ZiYang&#39;s Blog</title><link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.5.3/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="/lib/hint/hint.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.1.2/styles/github-gist.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css"><link rel="stylesheet" href="/css/main.css"><script id="fluid-configs">var Fluid=window.Fluid||{},CONFIG={hostname:"xcraft.tech",root:"/",version:"1.8.5",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1},toc:{enable:!0,headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"right",visible:"hover",icon:""},copy_btn:!0,image_zoom:{enable:!0},lazyload:{enable:!0,onlypost:!1},web_analytics:{enable:!1,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null}}}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 5.4.2"></head><body><header style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/">&nbsp;<strong>ZiYang-Xie's Blog</strong>&nbsp;</a> <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> 首页</a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> 归档</a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> 分类</a></li><li class="nav-item"><a class="nav-link" href="/tags/"><i class="iconfont icon-tags-fill"></i> 标签</a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> 关于</a></li><li class="nav-item" id="search-btn"><a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" href="javascript:">&nbsp;<i class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a></li></ul></div></div></nav><div class="banner intro-2" id="background" parallax="true" style="background:url(/img/bg_in.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="page-header text-center fade-in-up"><span class="h2" id="subtitle" title="ICS_PJ Y86 Extended CPU"></span><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2021-01-06 10:23" pubdate>2021年1月6日 上午</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 3.2k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 35 分钟</span></div></div></div></div></div></header><main><div class="container-fluid"><div class="row"><div class="d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-md"><div class="container nopadding-md" id="board-ctn"><div class="py-5" id="board"><article class="post-content mx-auto"><h1 style="display:none">ICS_PJ Y86 Extended CPU</h1><div class="markdown-body"><p><em>项目地址： <a target="_blank" rel="noopener" href="https://github.com/fdu2019xzy/ICS_Y86">https://github.com/fdu2019xzy/ICS_Y86</a></em></p><hr><h2 id="一、项目基本信息"><a href="#一、项目基本信息" class="headerlink" title="一、项目基本信息"></a>一、项目基本信息</h2><h3 id="1-项目简介"><a href="#1-项目简介" class="headerlink" title="1. 项目简介"></a>1. 项目简介</h3><p>Y86-Extended 是由谢子飏和王少文组队合作完成的项目，作为复旦大学 ICS (上) 的期末PJ，<br>本项目在实现了本项目在基础流水线处理器架构之上添加了<strong>更高级的分支预测</strong>、<strong>硬件栈</strong>、 <strong>y86 指令集扩展</strong>，并编写了一个<strong>汇编器</strong> yyas (支持宏定义)，以及其他特殊功能。结合精美的前端，根据上传文件性质不同 (yo/ys) 可以在普通模式和编译模式下运行程序, 具有较高的鲁棒性, 能够直观的看到基本信息、所有的寄存器信息 (包括流水线寄存器)、运行进度、当前指令和其他信息。</p><p>支持任意<strong>前进回溯</strong>、<strong>设置断点</strong>、<strong>终端输出</strong> (包含<strong>彩色矩阵</strong>)等扩展功能</p><h3 id="2-项目分工"><a href="#2-项目分工" class="headerlink" title="2. 项目分工"></a>2. 项目分工</h3><p>王少文：后端 CPU 主体设计及汇编器<br>谢子飏： (中) 前端及测试</p><h3 id="3-项目架构及设计思路"><a href="#3-项目架构及设计思路" class="headerlink" title="3. 项目架构及设计思路"></a>3. 项目架构及设计思路</h3><p>我们的项目使用<strong>前后端分离</strong>开发策略，考虑到运行速度后端由 C++ 编写，中前端使用 Python, Vue.js, Js 开发。</p><ul><li>项目架构图</li></ul><p><img src="https://s3.ax1x.com/2021/01/06/sAvtMV.png" srcset="/img/loading.gif" style="width:500px"></p><ul><li>交互逻辑和运行过程</li></ul><p>整个交互逻辑和运行过程分为，前端上传 ys/yo 文件 post 到中端的 lauch.py 的flask服务器，flask驱动编译器编译并将编译好的yo文件传到 CPU 中。CPU 按设计跑完输出 data.json 文件，前端 fetch 后端 CPU 生成的 data.json 在前端按操作逻辑进行展示。</p><p>由于后端 C++ 跑的非常快，我们前端在上传后几乎能够即时获得 data, 而这样前后端分离的好处在于，我们前端可以非常自由的展现数据，所有的前进回溯甚至跳跃，都可以在 O(1) 内实现，不会出现很大的限制。</p><hr><h2 id="二、使用方式及功能详解"><a href="#二、使用方式及功能详解" class="headerlink" title="二、使用方式及功能详解"></a>二、使用方式及功能详解</h2><h3 id="1-具体使用方法"><a href="#1-具体使用方法" class="headerlink" title="1. 具体使用方法"></a>1. 具体使用方法</h3><p>(见项目目录下 README.md)</p><h3 id="2-功能详解"><a href="#2-功能详解" class="headerlink" title="2. 功能详解"></a>2. 功能详解</h3><ul><li>主体功能介绍图</li></ul><p><img src="https://s3.ax1x.com/2021/01/06/sAv8Gn.png" srcset="/img/loading.gif" alt></p><p><img src="https://s3.ax1x.com/2021/01/06/sAv3Ps.png" srcset="/img/loading.gif" alt></p><ul><li>当前指令模块</li></ul><p><img src="https://s3.ax1x.com/2021/01/06/sAvV2t.png" srcset="/img/loading.gif" style="width:250px"></p><p>当前指令显示我们当前运行到的指令 (PC 所指)，并包含前后文2条指令的信息。</p><p><strong>隐藏断点设置</strong></p><p>为了前端的布局美观和统一性，断点设置被隐藏进了当前指令卡片中，点击当前指令卡片即可设置断点。</p><p><img src="https://s3.ax1x.com/2021/01/06/sAvE8I.png" srcset="/img/loading.gif" style="width:400px"></p><p>可以任意设置增删断点</p><ul><li><strong>终端字符及彩色矩阵输出</strong></li></ul><p>根据后端的内存映射，我们可以让终端输出字符以及彩色矩阵。</p><p><img src="https://s3.ax1x.com/2021/01/06/sAvJx0.png" srcset="/img/loading.gif" style="width:300px"></p><ul><li>附带我们编写的 YYAS 汇编器，能够实现 ys 到 yo 的编译</li></ul><hr><h2 id="三、代码详解"><a href="#三、代码详解" class="headerlink" title="三、代码详解"></a>三、代码详解</h2><h3 id="1-前端代码架构分析"><a href="#1-前端代码架构分析" class="headerlink" title="1. 前端代码架构分析"></a>1. 前端代码架构分析</h3><ul><li>前端代码架构图</li></ul><p><img src="https://s3.ax1x.com/2021/01/06/sAvl5j.png" srcset="/img/loading.gif" alt></p><p>前端设计采用 Vue.js 和前端框架 iView 设计，由于 Vue 的<strong>响应式渲染</strong>性质，非常适合我们本次的前端要求，同时为了保持多平台使用的可能性，Vue并没有使用脚手架，所有的 Vue.js、jQuery 都采用了 <strong>CDN 引入</strong>模式。</p><p>其中 Index 是主页面入口，Index.js 包括 Vue app 的创建和 Vue 页面路由， Index.html 包含主页面的 DOM 树</p><p>Pages 里面包含了主要的界面，主页面是 main.js 包含 cpu 的主要功能。<br>所有的 Pages 作为 export 模块被引入到 Index.js 中进行路由。<br>main.js 里面包含了 main 页面所有<strong>逻辑函数</strong>，<strong>声明周期钩子</strong>，以及 main 页面的 DOM 树， 其他页面也是同样架构。</p><p>（由于是 CDN 引入 main 页面要插入路由的话， DOM 树应当是字符串形式传入 template 中）</p><p>CSS 里面包含了所有主要的样式表，对功能和作用区域的不同做了简单的分类。</p><p>Static 里面包含了需要读取的 Json data 信息，以及当前处理编译文件放置在 Source 中。</p><ul><li><strong>中台前后端链接代码</strong></li></ul><p>前后端连接使用的是 python flask 服务器，通过接前端上传表单的 post，将获得的文件传入编译器编译之后喂入 CPU 中，获得 data.json 前端再 getData。</p><h3 id="2-后端代码架构分析"><a href="#2-后端代码架构分析" class="headerlink" title="2. 后端代码架构分析"></a>2. 后端代码架构分析</h3><ul><li>后端代码架构图</li></ul><p><img src="https://s3.ax1x.com/2021/01/06/sAvQaQ.png" srcset="/img/loading.gif" alt></p><ul><li>汇编器部分<ul><li>汇编器的可执行文件为yyas.py，这是包含了所有代码（不需要import）的最终文件，试试./yyas -v 和 ./yyas -h，有惊喜</li><li>instr.py为Y86所有指令的信息（不含Y86 Extended的扩展部分）</li><li>striper.py为Stage1时，将yo文件转化为yoraw的脚本，目前已经被弃用，仅作为存档提交。现在实现相同功能请使用./yyas -r -np</li></ul></li><li>CPU部分<ul><li>Controller.cpp 为CPU的控制器，主要包含了流水线的控制逻辑</li><li>Device.cpp 为CPU流水线的核心，包含了FDEMW五个阶段的运行逻辑</li><li>Output.cpp 有一些用于输出的函数，用于Stage1输出至命令行或Stage2输出至json文件</li><li>Util.cpp包含了一些辅助的函数，例如In函数和Format函数（这里用了很多modern cpp的魔法）</li></ul></li></ul><hr><div style="page-break-after:always"></div><h2 id="四、-实现细节"><a href="#四、-实现细节" class="headerlink" title="四、 实现细节"></a>四、 实现细节</h2><h4 id="前端细节"><a href="#前端细节" class="headerlink" title="前端细节"></a>前端细节</h4><p>前端搭建了 anywhere 服务器 (用于解决跨域问题, 踩坑经历可以看第五节)，主要函数在 main.js 文件中， 通过各类声明周期函数和写的 handle 来处理上传，运行，停止，重置，以及断点设置等功能，此处不展开细讲，主要是后端。</p><p>（前端使用了 anywhere 服务器 + 中端 flask 服务器的双服务器架构，其主要是因为我们前端在 import 模块时不开本地服务器会产生跨域问题。对于跨域问题我们最开始遇到是在获取 data.json 的时候，踩坑过程中我们曾尝试通过jsonp 解决跨域问题，并且成功了，但在 import 模块时再次遇到了跨域问题，为了一劳永逸，我们直接使用了 anywhere 直接开了一个本地服。）</p><h4 id="后端细节"><a href="#后端细节" class="headerlink" title="后端细节"></a>后端细节</h4><ol><li><p><strong>关于流水线</strong>：为了尽可能的靠近实际的硬件架构，我们的CPU核心实现分成了<strong>wire</strong>和<strong>reg</strong>两种struct，用来模拟verilog硬件语言中的wire和reg，reg是实际存在的寄存器，而wire只是用于逻辑中转。为了模拟CPU的并行化，我们采用了如下的逻辑</p><ol><li>利用Reg中的数据计算F D E M W，写入wire变量（实际不存在）</li><li>利用现在的wire上的值，更新流水线及其他状态</li><li>将wire的值写入下一个Reg，例如f_wire写入D_Reg，当流水线状态为NORMAL时回到a</li></ol></li><li><p>每个阶段的具体实现逻辑， 与CSAPP上的电路实现差别不大，此处不再赘述</p></li><li><p><strong>关于扩展指令集</strong>：我们的指令集扩展见<strong>ISA.md</strong>，具体到流水线上只需少许修改各个阶段的逻辑，与官方设计思路差不太多，依次修改FDEMW就行。</p></li><li><p><strong>关于分支预测策略</strong>：我们的分支预测采用的是<strong>2比特溢出预测器</strong>，该预测器采用的逻辑如下图</p><p><img src="https://s3.ax1x.com/2021/01/06/sAvG2q.png" srcset="/img/loading.gif" alt="预测器"></p><ol><li>当JXX的信号不是Jmp时，更新上述的状态机</li><li>若状态机信号为3或者2，则进行跳转</li><li>若状态机信号为1或者0，则不进行跳转</li></ol><p>除此之外，我们也需要相应的改变分支错判的逻辑，需要加一个IfJump信号，当E阶段输出的信号与IfJump信号不同，说明分支预测错误，需要清空流水线。</p><p>这样的分支预测器，据统计可以达到90%的正确率（<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Branch_predictor），在我们的测试中，一般情况下可以提升10%-30%的性能">https://en.wikipedia.org/wiki/Branch_predictor），在我们的测试中，一般情况下可以提升10%-30%的性能</a></p></li><li><p><strong>关于复杂指令</strong>：在我们增加的指令中，有一些指令如mulq、divq和remq都是很耗时的指令，如果强行让他们在一个周期内完成，我们的CPU时钟频率就会非常低。因此我们假定这部分指令所需要的时间为其他指令最长耗时的10倍，在E阶段设置一个counter，建立一个递减的状态机，使用下面的控制逻辑</p><ol><li>如果指令属于上述复杂指令，将状态机置于10</li><li>如果状态机不为0，则使F D阶段进入STALL阶段，E阶段继续计算，但阻断E到M的输入，状态机减1</li><li>如果状态机为0，则流水线继续执行</li></ol><p>这样就可以实现维持较高CPU频率的同时，实现复杂指令。（即不会因为加了这个指令使其他指令的执行变慢）</p></li><li><p><strong>关于硬件栈</strong>：为了避免每次调用ret指令时两个时钟周期的浪费，我们采用了CSAPP上的硬件栈。在硬件上，硬件栈可以由多路选择器和多个寄存器构成，在这里我们简单的使用Stack实现（大小为0x20）。采用如下的控制逻辑：</p><ol><li>如果调用call指令，在栈没有满时，将地址载入硬件栈</li><li>如果调用ret指令，在栈非空时，弹栈，将值读出</li><li>在M阶段执行后，判断硬件栈的预测是否正确<ol><li>若正确，则继续执行</li><li>若不正确，则清空 F D E的流水线</li></ol></li></ol><p>使用硬件栈后，最差的情况即是与无硬件栈情况相同，最好情况在我们的测试中，可以增加30%+的性能。</p></li><li><p>关于指令不可写和非指令不可读保护：我们的汇编器会计算yo文件中，最后一个是指令的位置，在CPU运行时，会进行动态的判断</p><ol><li>在Fetch阶段读取不可读的位置，会产生INS错误</li><li>在其他阶段写入不可写的位置，会产生ADR错误</li></ol></li><li><p>关于宏定义：为了CPU的扩展性和兼容性，我们使用了宏定义来动态的开关某些特性，例如 <code>OUTPUT_JSON</code> 宏定义后即可输出 data_json 供前端使用。</p></li></ol><h4 id="汇编器细节"><a href="#汇编器细节" class="headerlink" title="汇编器细节"></a>汇编器细节</h4><p>我们的汇编器采用了依次处理的方式，如下(Code Explains itself)</p><pre><code class="hljs python">lines = gen_list(lines) <span class="hljs-comment">#解析关键词</span>
lines = remove_single_line_annot(lines) <span class="hljs-comment">#去除单行注释</span>
lines = remove_multi_line_annot(lines) <span class="hljs-comment">#去除多行注释</span>
lines = detach_label(lines) <span class="hljs-comment">#找到对应的label</span>
lines_ref = copy.deepcopy(lines) <span class="hljs-comment">#复制一份用于输出</span>
mem = get_memaddr(lines) <span class="hljs-comment">#找到内存对应的地址</span>
labels = get_def_label(lines) <span class="hljs-comment">#处理.define</span>
lines = replace_label(lines, mem, labels) <span class="hljs-comment">#处理label</span>
byte_code = gen_byte_code(lines) <span class="hljs-comment">#产生yo代码</span></code></pre><h4 id="测试细节"><a href="#测试细节" class="headerlink" title="测试细节"></a>测试细节</h4><p>我们采用Google Test 和 Python Unitest来辅助我们进行我们的程序测试。其在我们项目文件的 test 文件夹下，我们通过 shell 脚本和 python 脚本将模拟器的输出进行处理，转换成 gtest 代码以便于我们进行测试。</p><p>基本语句即为 <code>EXPECT_EQ(x, y)</code></p><ul><li>测试代码结构</li></ul><p><img src="/2021/01/06/ICS/ICS_PJ/测试代码架构.png" srcset="/img/loading.gif" alt></p><p>使用 Google Test 我们能够清晰的看到测试点信息。</p><ul><li>普通 yo_test</li></ul><p><img src="https://s3.ax1x.com/2021/01/06/sAvZxP.png" srcset="/img/loading.gif" style="width:300px"></p><ul><li>Hornor 测试</li></ul><p><img src="https://s3.ax1x.com/2021/01/06/sAvmKf.png" srcset="/img/loading.gif" style="width:300px"></p><ul><li>附加测试</li></ul><p><img src="https://s3.ax1x.com/2021/01/06/sAvMVg.png" srcset="/img/loading.gif" style="width:400px"></p><hr><div style="page-break-after:always"></div><h3 id="五、特点和创新"><a href="#五、特点和创新" class="headerlink" title="五、特点和创新"></a>五、特点和创新</h3><ol><li><p><strong>汇编器创新</strong>：我们兼容现有的所有ys文件的基础上，还添加了一些伪指令和语法</p><ol><li>不需要写逗号了：现在所有的ys指令操作数之间可以使用空格隔开</li><li>mrmovq和rmmovq：现在不需要强制写括号，可以直接mov至常数地址（此时寄存器为RNONE，我们的CPU也做了相应的修改）如rmmovq %rax $800</li><li>伪指令<ol><li>.define 类似C语言的宏定义</li><li>.string “mystring” 将后面的mystring转化为对应的ASCII码写入</li><li>.byte .hword .word支持</li></ol></li><li>能够生成yo文件和yoraw文件，生成的yo文件比官方的yo文件漂亮不少，完全对齐</li><li>有完整的命令行参数</li></ol><pre><code class="hljs vim">usage: yyas [-h] [-<span class="hljs-keyword">o</span> OUTFILE] [-r] [-np] [-v] sourcefile

yya<span class="hljs-variable">s:</span> Assemble .ys <span class="hljs-keyword">file</span> <span class="hljs-keyword">to</span> .yo <span class="hljs-keyword">file</span> <span class="hljs-built_in">or</span>/<span class="hljs-built_in">and</span> .yo <span class="hljs-keyword">file</span> <span class="hljs-keyword">to</span> raw byte <span class="hljs-keyword">file</span>

positional <span class="hljs-keyword">argument</span><span class="hljs-variable">s:</span>
  sourcefile            The <span class="hljs-keyword">source</span> <span class="hljs-keyword">file</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">be</span> assembled

optional <span class="hljs-keyword">argument</span><span class="hljs-variable">s:</span>
  -h, --<span class="hljs-keyword">help</span>            show this <span class="hljs-keyword">help</span> message <span class="hljs-built_in">and</span> <span class="hljs-keyword">exit</span>
  -<span class="hljs-keyword">o</span> OUTFILE, --output OUTFILE
                        Assign the output <span class="hljs-keyword">file</span>
  -r, --raw             Generate raw byte <span class="hljs-keyword">file</span>
  -np, --noprefix       Do not generate prefix in raw output
  -v, --<span class="hljs-keyword">version</span>         show <span class="hljs-keyword">version</span></code></pre></li><li><p><strong>处理器创新</strong>（见具体实现）</p><ol><li>更好的分支预测器</li><li>硬件栈</li><li>几乎三倍的指令集支持（及其扩展含义）</li><li>复杂指令集的多周期支持</li></ol></li></ol><hr><h3 id="六、总结与回顾"><a href="#六、总结与回顾" class="headerlink" title="六、总结与回顾"></a>六、总结与回顾</h3><h4 id="PJ-心得总结及致谢"><a href="#PJ-心得总结及致谢" class="headerlink" title="PJ 心得总结及致谢"></a>PJ 心得总结及致谢</h4><p>本次 PJ 让我们更加深入的理解了现代流水线处理器的原理，各种硬件栈，扩展指令集的设计也拓展了我们的技术边缘，非常不错的体验。最后非常感谢助教和金老师一学期的辛苦工作。在很多方面帮助了我们，助教的 Lab 非常精彩有趣，金老师的课十分幽默风趣，非常感谢各位的付出。</p></div><hr><div><div class="post-metas mb-3"><div class="post-meta mr-3"><i class="iconfont icon-category"></i> <a class="hover-with-bg" href="/categories/ICS/">ICS</a></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a class="hover-with-bg" href="/tags/CPU/">CPU</a></div></div><p class="note note-warning">本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p><div class="post-prevnext row"><article class="post-prev col-6"><a href="/2021/01/22/Research/DETR/"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">DETR 论文阅读</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/2020/12/17/final_todo/"><span class="hidden-mobile">期末 DDL + TODOList</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article class="comments" id="comments"><div id="gitalk-container"></div><script type="text/javascript">Fluid.utils.waitElementVisible("gitalk-container",(function(){Fluid.utils.createCssLink("/css/gitalk.css"),Fluid.utils.createScript("https://cdn.staticfile.org/gitalk/1.7.0/gitalk.min.js",(function(){new Gitalk({clientID:"bb132e59582b2e328abc",clientSecret:"884bfc0ac692d040744d5e4b81ffd6f1aa95cbc0",repo:"CsBlog",owner:"ZiYang-xie",admin:["ZiYang-xie"],id:"a8f8b6c049842d846102ff719751696e",language:"zh-CN",labels:["Gitalk"],perPage:10,pagerDirection:"last",createIssueManually:!0,distractionFreeMode:!1}).render("gitalk-container")}))}))</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p><div class="toc-body" id="toc-body"></div></div></div></div></div><a id="scroll-top-button" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer class="text-center mt-5 py-3"><div class="footer-content"><p>Fight For The Happiness of Humanity</p><div><span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span><script src="/js/duration.js"></script></div></div><div class="statistics"><span id="busuanzi_container_site_pv" style="display:none">总访问量 <span id="busuanzi_value_site_pv"></span> 次 </span><span id="busuanzi_container_site_uv" style="display:none">总访客数 <span id="busuanzi_value_site_uv"></span> 人</span></div><div class="beian"><a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">沪ICP备20009486号-1</a></div></footer><script src="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:200}),NProgress.start(),document.addEventListener("DOMContentLoaded",(function(){window.NProgress&&window.NProgress.inc()})),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://cdn.staticfile.org/jquery/3.5.1/jquery.min.js"></script><script src="https://cdn.staticfile.org/twitter-bootstrap/4.5.3/js/bootstrap.min.js"></script><script src="/js/debouncer.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="/js/lazyload.js"></script><script src="https://cdn.staticfile.org/tocbot/4.12.0/tocbot.min.js"></script><script src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js"></script><script src="https://cdn.staticfile.org/anchor-js/4.3.0/anchor.min.js"></script><script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js"></script><script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js"></script><script>!function(t,i){(0,Fluid.plugins.typing)(i.getElementById("subtitle").title)}(window,document)</script><script src="/js/local-search.js"></script><script>document.querySelector("#local-search-input").onclick=function(){searchFunc("/local-search.xml","local-search-input","local-search-result"),this.onclick=null}</script><script src="/js/boot.js"></script></body></html>